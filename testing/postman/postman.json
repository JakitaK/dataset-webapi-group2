{
	"info": {
		"_postman_id": "be127f8d-8a84-4715-80ba-2ef6ccf55315",
		"name": "Movies API – Group 2 (Heroku)",
		"description": "Collection to test all Movie API routes hosted on Heroku, with API key authentication",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "49381083",
		"_collection_link": "https://jakitak-70788.postman.co/workspace/Jakita-Kaur's-Workspace~4bb6a05f-d7f6-4ebd-8b46-8154879d9105/collection/49381083-be127f8d-8a84-4715-80ba-2ef6ccf55315?action=share&source=collection_link&creator=49381083"
	},
	"item": [
		{
			"name": "GET /api/hello – Health Check",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"200 OK\", () => pm.response.code === 200);",
							"const b = pm.response.json();",
							"pm.test(\"Has message\", () => b && typeof b.message === \"string\" && b.message.length > 0);",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/hello",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"hello"
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /api/v1/moviebyyear – 2019 (page=1, limit=5)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"200 OK\", () => pm.response.code === 200);",
							"const b = pm.response.json();",
							"pm.test(\"Has pagination fields\", () => b && \"total\" in b && \"page\" in b && \"pages\" in b && \"limit\" in b);",
							"pm.test(\"data is array\", () => Array.isArray(b.data));",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/moviebyyear?year=2019&page=1&limit=5",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"moviebyyear"
					],
					"query": [
						{
							"key": "year",
							"value": "2019"
						},
						{
							"key": "page",
							"value": "1"
						},
						{
							"key": "limit",
							"value": "5"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /api/v1/movies – page 1 (limit 10)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"200 OK\", () => pm.response.code === 200);",
							"const b = pm.response.json();",
							"pm.test(\"Array or {data:[...]}\", () => Array.isArray(b) || (b && Array.isArray(b.data)));",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/movies?page=1&limit=10",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"movies"
					],
					"query": [
						{
							"key": "page",
							"value": "1"
						},
						{
							"key": "limit",
							"value": "10"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /api/v1/movies/top-rated – limit 5",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"200 OK\", () => pm.response.code === 200);",
							"pm.test(\"Body is array\", () => Array.isArray(pm.response.json()));",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/movies/top-rated?limit=5",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"movies",
						"top-rated"
					],
					"query": [
						{
							"key": "limit",
							"value": "5"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /api/v1/movies/top-grossing – limit 5",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"200 OK\", () => pm.response.code === 200);",
							"pm.test(\"Body is array\", () => Array.isArray(pm.response.json()));",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/movies/top-grossing?limit=5",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"movies",
						"top-grossing"
					],
					"query": [
						{
							"key": "limit",
							"value": "5"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /api/v1/movies/recent – default",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"200 OK\", () => pm.response.code === 200);",
							"pm.test(\"Body is array\", () => Array.isArray(pm.response.json()));",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/movies/recent",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"movies",
						"recent"
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /api/v1/movies/director/{id} – use a real ID",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"200 OK\", () => pm.response.code === 200);",
							"pm.test(\"Body is array\", () => Array.isArray(pm.response.json()));",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/movies/director/1",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"movies",
						"director",
						"1"
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /api/v1/movies/actor/{id} – use a real ID",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"200 OK\", () => pm.response.code === 200);",
							"pm.test(\"Body is array\", () => Array.isArray(pm.response.json()));",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/movies/actor/1",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"movies",
						"actor",
						"1"
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /api/v1/moviebyyear – NO API KEY (401)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"401 when no key\", () => pm.response.code === 401);",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/moviebyyear?year=2019",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"moviebyyear"
					],
					"query": [
						{
							"key": "year",
							"value": "2019"
						}
					]
				}
			},
			"response": []
		},
		
		{
  "name": "GET /api/v1/moviebyyear – WRONG API KEY (403)",
  "event": [
    {
      "listen": "test",
      "script": {
        "exec": [
          "pm.test(\"403 when wrong key\", () => pm.response.code === 403);",
          "const body = pm.response.json();",
          "pm.test(\"Invalid API key message\", () => body && body.error && body.error.includes(\"Invalid API key\"));"
        ],
        "type": "text/javascript"
      }
    }
  ],
  "request": {
    "auth": {
      "type": "apikey",
      "apikey": [
        {
          "key": "value",
          "value": "WRONG_KEY",
          "type": "string"
        },
        {
          "key": "key",
          "value": "x-api-key",
          "type": "string"
        }
      ]
    },
    "method": "GET",
    "header": [],
    "url": {
      "raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/moviebyyear?year=2019",
      "protocol": "https",
      "host": [
        "movie-api-group2-20e70498bde4",
        "herokuapp",
        "com"
      ],
      "path": [
        "api",
        "v1",
        "moviebyyear"
      ],
      "query": [
        {
          "key": "year",
          "value": "2019"
        }
      ]
    }
  },
  "response": []
},

		{
			"name": "GET /api/v1/moviebyyear – MISSING year (400)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"400 missing year\", () => pm.response.code === 400);",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/moviebyyear",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"moviebyyear"
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /api/v1/moviebyyear – INVALID year=abc (400)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"400 invalid year\", () => pm.response.code === 400);",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/moviebyyear?year=abc",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"moviebyyear"
					],
					"query": [
						{
							"key": "year",
							"value": "abc"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /api/v1/moviebyyear – Out-of-Range Page",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"200 OK\", () => pm.response.code === 200);",
							"const b = pm.response.json();",
							"pm.test(\"data is array (even if empty)\", () => Array.isArray(b.data));",
							"pm.test(\"No crash on large page\", () => true);",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/moviebyyear?year=2019&page=9999&limit=5",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"moviebyyear"
					],
					"query": [
						{
							"key": "year",
							"value": "2019"
						},
						{
							"key": "page",
							"value": "9999"
						},
						{
							"key": "limit",
							"value": "5"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /api/v1/movies – Limit Cap (stress test)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"200 OK\", () => pm.response.code === 200);",
							"const b = pm.response.json();",
							"pm.test(\"Array or {data:[...]}\", () => Array.isArray(b) || (b && Array.isArray(b.data)));",
							"pm.test(\"Still responds quickly\", () => pm.response.responseTime < 3000);",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/movies?limit=500",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"movies"
					],
					"query": [
						{
							"key": "limit",
							"value": "500"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GET /api/v1/movies/director/999999 (nonexistent ID)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"200 OK\", () => pm.response.code === 200);",
							"pm.test(\"Returns empty array for bad ID\", () => {",
							"  const data = pm.response.json();",
							"  return Array.isArray(data) && data.length === 0;",
							"});",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/movies/director/999999",
					"protocol": "https",
					"host": [
						"movie-api-group2-20e70498bde4",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"movies",
						"director",
						"999999"
					]
				}
			},
			"response": []
		},
		{
  "name": "GET /api/v1/movies — Filter PG-13, 2015–2023 (limit=5)",
  "event": [
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "pm.test(\"200 OK\", () => pm.response.code === 200);",
          "const b = pm.response.json();",
          "pm.test(\"Array or {data:[...]}\", () => Array.isArray(b) || (b && Array.isArray(b.data)));"
        ]
      }
    }
  ],
  "request": {
    "method": "GET",
    "header": [],
    "url": {
      "raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/movies?mpaRating=PG-13&yearMin=2015&yearMax=2023&limit=5",
      "protocol": "https",
      "host": [
        "movie-api-group2-20e70498bde4",
        "herokuapp",
        "com"
      ],
      "path": ["api","v1","movies"],
      "query": [
        {"key": "mpaRating", "value": "PG-13"},
        {"key": "yearMin", "value": "2015"},
        {"key": "yearMax", "value": "2023"},
        {"key": "limit", "value": "5"}
      ]
    }
  },
  "response": []
},
{
  "name": "GET /api/v1/movies — Filter Action + actor Tom Hanks (limit=5)",
  "event": [
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "pm.test(\"200 OK\", () => pm.response.code === 200);",
          "const b = pm.response.json();",
          "pm.test(\"Array or {data:[...]}\", () => Array.isArray(b) || (b && Array.isArray(b.data)));"
        ]
      }
    }
  ],
  "request": {
    "method": "GET",
    "header": [],
    "url": {
      "raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/movies?genre=Action&actor=Tom%20Hanks&limit=5",
      "protocol": "https",
      "host": [
        "movie-api-group2-20e70498bde4",
        "herokuapp",
        "com"
      ],
      "path": ["api","v1","movies"],
      "query": [
        {"key": "genre", "value": "Action"},
        {"key": "actor", "value": "Tom Hanks"},
        {"key": "limit", "value": "5"}
      ]
    }
  },
  "response": []
},
{
  "name": "GET /api/v1/movies — Offset pagination (limit=10, offset=10)",
  "event": [
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "pm.test(\"200 OK\", () => pm.response.code === 200);",
          "const b = pm.response.json();",
          "pm.test(\"Array or {data:[...]}\", () => Array.isArray(b) || (b && Array.isArray(b.data)));"
        ]
      }
    }
  ],
  "request": {
    "method": "GET",
    "header": [],
    "url": {
      "raw": "https://movie-api-group2-20e70498bde4.herokuapp.com/api/v1/movies?limit=10&offset=10",
      "protocol": "https",
      "host": [
        "movie-api-group2-20e70498bde4",
        "herokuapp",
        "com"
      ],
      "path": ["api","v1","movies"],
      "query": [
        {"key": "limit", "value": "10"},
        {"key": "offset", "value": "10"}
      ]
    }
  },
  "response": []
}

	],
	"auth": {
		"type": "apikey",
		"apikey": [
			{
				"key": "value",
				"value": "{{api_key}}",
				"type": "string"
			},
			{
				"key": "key",
				"value": "x-api-key",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "api_key",
			"value": ""
		},
		{
			"key": "base_url",
			"value": ""
		}
	]
}
